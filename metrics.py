def com_acc(y_true, y_pre, threshold):
    try:
        a = y_true.values
        y_true = y_true.values
    except AttributeError:
        pass
    score = 0
    for i in range(len(y_pre)):
        sk = 1 if y_pre[i] >= threshold else 0
        score += int(sk == y_true[i]) - (sk - y_true[i])*sk
    return score/len(y_true)


def com_acc_keras(threshold):
    def acc(y_true, y_pre):
        y_true = y_true
        score = 0
        print(y_pre.shape)
        for i in range(y_pre.shape[0]):
            sk = 1 if y_pre[i] >= threshold else 0
            score += int(sk == y_true[i]) - (sk - y_true[i]) * sk
        return score / len(y_true)
    return acc
