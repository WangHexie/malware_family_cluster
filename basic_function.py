import os

import pandas as pd
from numpy import int64
from numpy import nan, array


def get_root_path() -> str:
    return os.path.abspath(os.path.dirname(__file__))


def useless():
    return nan, array, int64


def extract_id_from_file_name(x: str):
    return x.split('.')[0]


def load_df(dir_name, mode=0):
    files = os.listdir(dir_name)
    if mode == 0:
        k = [pd.read_csv(os.path.join(dir_name, file))[['file_name', 'api_name']] for file in files]
    else:
        k = [pd.read_csv(os.path.join(dir_name, file)) for file in files]
    return pd.concat(k)


def make_dir(name):
    if not os.path.exists(name):
        os.makedirs(name)


def get_file_list_in_dir(path):
    return [name for name in os.listdir(path) if not os.path.isdir(os.path.join(path, name))]


def save_dict(dictionary, path):
    with open(path, "w") as f:
        f.write(str(dictionary))
        return


def load_dict(path):
    with open(path, "r") as f:
        dic = f.read()
    return eval(dic)
